package com.maodajun.zhihu.bean;

import com.maodajun.zhihu.service.HttpTools;
import org.junit.Test;
import org.nutz.http.Http;
import org.nutz.http.Response;
import org.nutz.json.Json;

import java.io.IOException;

import static org.junit.Assert.*;

public class HttpToolsTest {

    @Test
    public void urlToJson() throws IOException {
        HttpTools tools = new HttpTools();
//        Response res = Http.get("https://www.zhihu.com/question/49296232");
//        System.out.println( res.getContent());
        tools.init();
        Object obj = tools.urlToJson("https://www.zhihu.com/api/v4/members/1005gel/followees?offset=0&limit=20");
        System.out.println(Json.toJson(obj));

        tools.quit();
    }
    @Test
    public void urlToMoreJson() throws IOException {
        HttpTools tools = new HttpTools();
//        Response res = Http.get("https://www.zhihu.com/question/49296232");
//        System.out.println( res.getContent());
        tools.init();
        for (int i = 0; i <100 ; i++) {
            Object obj = tools.urlToJson("https://www.zhihu.com/api/v4/members/1005gel/followees?offset=0&limit=20");
            System.out.println(Json.toJson(obj));
        }


    }
    @Test
    public void proxy() {
        HttpTools tools = new HttpTools();
      //  System.out.println(tools.proxy());

    }
    @Test
    public void jsonHTML(){
        String html ="<html><head></head><body><pre style=\"word-wrap: break-word; white-space: pre-wrap;\">{\"paging\":{\"is_end\":false,\"is_start\":true,\"next\":\"https://www.zhihu.com/members/1005gel/followees?limit=20\\u0026offset=20\",\"previous\":\"https://www.zhihu.com/members/1005gel/followees?limit=20\\u0026offset=0\",\"totals\":199},\"data\":[{\"id\":\"281e4747b1092fb3648be9510531d082\",\"url_token\":\"di-yicai-jing-zhou-kan-20\",\"name\":\"第一财经周刊\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic4.zhimg.com/v2-6ee62c9208490fb502b4ffefef7d6943_is.jpg\",\"avatar_url_template\":\"https://pic4.zhimg.com/v2-6ee62c9208490fb502b4ffefef7d6943_{size}.jpg\",\"is_org\":true,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/di-yicai-jing-zhou-kan-20\",\"user_type\":\"organization\",\"headline\":\"商业，有点儿意思\",\"gender\":-1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"987e0850b0d6ccc148db84ba60c48341\",\"url_token\":\"xiongfengcherish\",\"name\":\"熊风\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic2.zhimg.com/v2-d634c676b1135dcef464e3a44f2dae43_is.jpg\",\"avatar_url_template\":\"https://pic2.zhimg.com/v2-d634c676b1135dcef464e3a44f2dae43_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/xiongfengcherish\",\"user_type\":\"people\",\"headline\":\"HKUST CS MPhil , 计算机视觉、机器学习\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"eedc3f0ed4c70625478e77d5dcbf4405\",\"url_token\":\"yin-jiao-shou-32\",\"name\":\"银教授\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic2.zhimg.com/f914a8f28_is.jpg\",\"avatar_url_template\":\"https://pic2.zhimg.com/f914a8f28_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/yin-jiao-shou-32\",\"user_type\":\"people\",\"headline\":\"公众号：yinjiaoshou886\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"879214612dc4e01b0aad0d7b4ccdff91\",\"url_token\":\"pingcejun\",\"name\":\"放心选·独孤评测\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic4.zhimg.com/v2-eedc20b7e883c6fd96ed18090fa2d01e_is.jpg\",\"avatar_url_template\":\"https://pic4.zhimg.com/v2-eedc20b7e883c6fd96ed18090fa2d01e_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/pingcejun\",\"user_type\":\"people\",\"headline\":\"万物评测组织，公众号：放心选，fangxinpingce\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"a4725e9510fe7075f2ba7d7c3c0719d9\",\"url_token\":\"ma-jian-4-91-31\",\"name\":\"马健\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic4.zhimg.com/v2-2c5a31018d0aa0db55639f608586ffad_is.jpg\",\"avatar_url_template\":\"https://pic4.zhimg.com/v2-2c5a31018d0aa0db55639f608586ffad_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/ma-jian-4-91-31\",\"user_type\":\"people\",\"headline\":\"\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"fd51f37ac298387052e18e73158e3187\",\"url_token\":\"reallysugar\",\"name\":\"无色方糖\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic3.zhimg.com/1eba86958dff6ee3d6ae09539e40c30b_is.jpg\",\"avatar_url_template\":\"https://pic3.zhimg.com/1eba86958dff6ee3d6ae09539e40c30b_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/reallysugar\",\"user_type\":\"people\",\"headline\":\"再发芽的小透明\",\"gender\":0,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"890be89376b155e5f55fb9930b3293a8\",\"url_token\":\"xianhu\",\"name\":\"笑虎\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic3.zhimg.com/7e0d3077902609cfc42ad84579d7bf61_is.jpg\",\"avatar_url_template\":\"https://pic3.zhimg.com/7e0d3077902609cfc42ad84579d7bf61_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/xianhu\",\"user_type\":\"people\",\"headline\":\"不想当产品的程序员不是好的数据分析师！\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"807cbdad0c3629cc02c6c6e84ee98fba\",\"url_token\":\"guo-zi-501\",\"name\":\"张译\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic4.zhimg.com/31d2a5bed119fca57cc6e7b05fcb7721_is.jpg\",\"avatar_url_template\":\"https://pic4.zhimg.com/31d2a5bed119fca57cc6e7b05fcb7721_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/guo-zi-501\",\"user_type\":\"people\",\"headline\":\"知乎000号员工+猫与观众的侍者\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"cfdec6226ece879d2571fbc274372e9f\",\"url_token\":\"evanyou\",\"name\":\"尤雨溪\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic1.zhimg.com/7be980a0f_is.jpg\",\"avatar_url_template\":\"https://pic1.zhimg.com/7be980a0f_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/evanyou\",\"user_type\":\"people\",\"headline\":\"一个前端\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"010fb6ef16fc9d0890cac82df065bb9f\",\"url_token\":\"mayanan-1\",\"name\":\"马亚南\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic2.zhimg.com/4d3f3da9cfa29c0d94ff7570640c8507_is.jpg\",\"avatar_url_template\":\"https://pic2.zhimg.com/4d3f3da9cfa29c0d94ff7570640c8507_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/mayanan-1\",\"user_type\":\"people\",\"headline\":\"\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"4920fca107ec266a26bf578ff112a6d3\",\"url_token\":\"he-ming-ke\",\"name\":\"何明科\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic4.zhimg.com/36b158fd8_is.jpg\",\"avatar_url_template\":\"https://pic4.zhimg.com/36b158fd8_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/he-ming-ke\",\"user_type\":\"people\",\"headline\":\"不写程序的数据工程师不是好产品经理\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":true,\"rename_days\":\"60\",\"vip_icon\":{\"url\":\"https://pic2.zhimg.com/v2-034fefe15c83232cb448718998719d34_r.png\",\"night_mode_url\":\"https://pic3.zhimg.com/v2-c9686ff064ea3579730756ac6c289978_r.png\"}}},{\"id\":\"36dc22308305986f64e1b8dc5bc4d72a\",\"url_token\":\"zhang-wei-qi-25\",\"name\":\"张伟棋\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic1.zhimg.com/6524500cc_is.jpg\",\"avatar_url_template\":\"https://pic1.zhimg.com/6524500cc_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/zhang-wei-qi-25\",\"user_type\":\"people\",\"headline\":\"Stats Major, Data lover\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"2b81947c2821e9d2f47907a51b15e6f8\",\"url_token\":\"e-miao-de-nai-ba\",\"name\":\"用户不存在\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic1.zhimg.com/v2-68656ca2645273ac0b1044d67111af35_is.jpg\",\"avatar_url_template\":\"https://pic1.zhimg.com/v2-68656ca2645273ac0b1044d67111af35_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/e-miao-de-nai-ba\",\"user_type\":\"people\",\"headline\":\"\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"18b17051663bffa1f556049e8e885fba\",\"url_token\":\"yunshu\",\"name\":\"云舒\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic1.zhimg.com/v2-ac71d046d7c4dab9dfee27b0f2a87254_is.jpg\",\"avatar_url_template\":\"https://pic1.zhimg.com/v2-ac71d046d7c4dab9dfee27b0f2a87254_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/yunshu\",\"user_type\":\"people\",\"headline\":\"默安科技联合创始人兼CTO，著名网络安全研究人员\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"fa6c21004883afa4623e423155befabe\",\"url_token\":\"cocosuma\",\"name\":\"可可苏玛\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic2.zhimg.com/v2-099aefd7c813ee7b1d8b02802d8ab1b6_is.jpg\",\"avatar_url_template\":\"https://pic2.zhimg.com/v2-099aefd7c813ee7b1d8b02802d8ab1b6_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/cocosuma\",\"user_type\":\"people\",\"headline\":\"反玩家的玩家\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"5874b9fc2c79879886cc9caaa2aa1492\",\"url_token\":\"windleavez\",\"name\":\"windleavez\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic2.zhimg.com/787819c89_is.jpg\",\"avatar_url_template\":\"https://pic2.zhimg.com/787819c89_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/windleavez\",\"user_type\":\"people\",\"headline\":\"电子游戏 / 影碟爱好者\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":true,\"rename_days\":\"60\",\"vip_icon\":{\"url\":\"https://pic2.zhimg.com/v2-034fefe15c83232cb448718998719d34_r.png\",\"night_mode_url\":\"https://pic3.zhimg.com/v2-c9686ff064ea3579730756ac6c289978_r.png\"}}},{\"id\":\"2d4604089c5c7810f486f9f2bcf07f97\",\"url_token\":\"chu-yang-51-32\",\"name\":\"初洋\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic1.zhimg.com/9c25b3eb6965f479b4d896c842dd1a0c_is.jpg\",\"avatar_url_template\":\"https://pic1.zhimg.com/9c25b3eb6965f479b4d896c842dd1a0c_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/chu-yang-51-32\",\"user_type\":\"people\",\"headline\":\"不再是个医生\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"f0ecd8f8a99b04ee2492a928b3f70738\",\"url_token\":\"shu-xi-ting\",\"name\":\"舒西婷\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic3.zhimg.com/187189c05_is.jpg\",\"avatar_url_template\":\"https://pic3.zhimg.com/187189c05_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/shu-xi-ting\",\"user_type\":\"people\",\"headline\":\"合不拢腿的傲娇娘\",\"gender\":0,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"bbaa05ad3ccb7836dc7512bf063498a8\",\"url_token\":\"panghocheung\",\"name\":\"彭浩翔\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic3.zhimg.com/v2-79ec31e2e3fdf767e3d37468accf74c6_is.jpg\",\"avatar_url_template\":\"https://pic3.zhimg.com/v2-79ec31e2e3fdf767e3d37468accf74c6_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/panghocheung\",\"user_type\":\"people\",\"headline\":\"\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}},{\"id\":\"17fe26c7cbd996dac6f7e9e415883d42\",\"url_token\":\"dongfei\",\"name\":\"董飞\",\"use_default_avatar\":false,\"avatar_url\":\"https://pic1.zhimg.com/v2-5c8c9331b13e417b37b32b259ffc81ba_is.jpg\",\"avatar_url_template\":\"https://pic1.zhimg.com/v2-5c8c9331b13e417b37b32b259ffc81ba_{size}.jpg\",\"is_org\":false,\"type\":\"people\",\"url\":\"https://www.zhihu.com/people/dongfei\",\"user_type\":\"people\",\"headline\":\"Learning without limit\",\"gender\":1,\"is_advertiser\":false,\"vip_info\":{\"is_vip\":false,\"rename_days\":\"60\"}}]}\n" +
                "</pre></body></html>";
        String Html2 = html.replaceAll("<[^>]+>","--");
        System.out.println(html);
        System.out.println(Html2);
    }
}